/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 12.0 		*/
/*  Created On : 18-jan-2018 01:28:31 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 ;

/* Create Tables */

CREATE TABLE `Warehouse`
(
	`ID_Warehouse` INT NOT NULL,
	`Location` VARCHAR(50) 	,
	`Capacity` INT 	,
	CONSTRAINT `PK_Table1` PRIMARY KEY (`ID_Warehouse`)
)

;

CREATE TABLE `T_Order`
(
	`ID_Order` INT NOT NULL,
	`Date` DATE 	,
	`Status` VARCHAR(50) 	,
	`Cost` INT 	,
	`ETA` INT 	,
	CONSTRAINT `Order` PRIMARY KEY (`ID_Order`)
)

;

CREATE TABLE `Produced`
(
	`ID_Plant` INT NOT NULL,
	`ID_Farm` INT NOT NULL,
	`ID_Warehouse` INT NOT NULL,
	`Amount` INT 	,
	`Unit_Price` INT 	,
	`Date` DATE 	,
	CONSTRAINT `PK_Produced` PRIMARY KEY (`ID_Plant`,`ID_Farm`,`ID_Warehouse`)
)

;

CREATE TABLE `Plant`
(
	`ID_Plant` INT NOT NULL,
	`Name` VARCHAR(50) 	,
	`Variety` VARCHAR(50) 	,
	`Type` VARCHAR(50) 	,
	`MST` INT 	,
	`Family` VARCHAR(50) 	,
	CONSTRAINT `PK_Plant` PRIMARY KEY (`ID_Plant`)
)

;

CREATE TABLE `Makes`
(
	`ID_Costumer` INT NOT NULL,
	`ID_Order` INT NOT NULL,
	CONSTRAINT `PK_Makes` PRIMARY KEY (`ID_Costumer`,`ID_Order`)
)

;

CREATE TABLE `Include`
(
	`ID_Order` INT NOT NULL,
	`ID_Plant` INT NOT NULL,
	`ID_Farm` INT NOT NULL,
	`ID_Warehouse` INT NOT NULL,
	`Amount` INT 	,
	CONSTRAINT `PK_Include` PRIMARY KEY (`ID_Order`,`ID_Plant`,`ID_Farm`,`ID_Warehouse`)
)

;

CREATE TABLE `Farm`
(
	`ID_Farm` INT NOT NULL,
	`Name` VARCHAR(50) 	,
	`Address` VARCHAR(50) 	,
	`Owner` VARCHAR(50) 	,
	CONSTRAINT `PK_Table1` PRIMARY KEY (`ID_Farm`)
)

;

CREATE TABLE `Costumer`
(
	`ID_Costumer` INT NOT NULL,
	`Name` VARCHAR(50) 	,
	`Mail` VARCHAR(50) 	,
	`Phone` VARCHAR(50) 	,
	`Address` VARCHAR(50) 	,
	CONSTRAINT `Costumer` PRIMARY KEY (`ID_Costumer`)
)

;

/* Create Foreign Key Constraints */

ALTER TABLE `Produced` 
 ADD CONSTRAINT `FK_Produced_Farm`
	FOREIGN KEY (`ID_Farm`) REFERENCES `Farm` (`ID_Farm`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Produced` 
 ADD CONSTRAINT `FK_Produced_Plant`
	FOREIGN KEY (`ID_Plant`) REFERENCES `Plant` (`ID_Plant`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Produced` 
 ADD CONSTRAINT `FK_Produced_Warehouse`
	FOREIGN KEY (`ID_Warehouse`) REFERENCES `Warehouse` (`ID_Warehouse`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Makes` 
 ADD CONSTRAINT `FK_Makes_Costumer`
	FOREIGN KEY (`ID_Costumer`) REFERENCES `Costumer` (`ID_Costumer`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Makes` 
 ADD CONSTRAINT `FK_Makes_T_Order`
	FOREIGN KEY (`ID_Order`) REFERENCES `T_Order` (`ID_Order`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Include` 
 ADD CONSTRAINT `FK_Include_Produced`
	FOREIGN KEY (`ID_Plant`,`ID_Farm`,`ID_Warehouse`) REFERENCES `Produced` (`ID_Plant`,`ID_Farm`,`ID_Warehouse`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Include` 
 ADD CONSTRAINT `FK_Include_T_Order`
	FOREIGN KEY (`ID_Order`) REFERENCES `T_Order` (`ID_Order`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1 ;
